# 文件

# 一、 文件概念

> 一组有意义的信息/数据的集合

**1. 文件数据如何组织**

- 无结构文件：二进制和字符
- 有结构文件：数据库这类，记录式文件

**2. 操作系统向上提供的功能**

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200522121606452.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**3. 存放**

> 以块为单位存放到外存中

# 二、文件的逻辑结构

> 主要讨论有结构文件：顺序文件、索引文件和索引顺序文件

**定长记录：**

- 定长记录：确定每一条的大小

- 可变长记录：不确定每一条的大小

## 有结构文件的逻辑结构

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200522130204569.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

### 顺序文件

> 逻辑上是有顺序的，物理上有顺序叫顺序存储，没有叫链式存储（一般不考虑）

**记录的顺序**

与关键字的关系：

- 串结构：与关键字无关
- 顺序结构：与关键字有关

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200522131914765.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

### 索引文件

> 解决可变记录文件的随机查找问题--->建立一个顺序文件来==映射==到可变记录文件

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200522132434390.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

### 索引顺序文件

> 缺点：索引文件的每一个文件都要有一个索引表，可能会使得索引文件比原文件还大
>
> 解决：给文件分组，一组才分配一个索引

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200522133637290.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

### 多级索引顺序文件

> 为了避免索引文件还是过于大，采用多级索引的方式，既降低了空间，又提高了效率

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200522135535103.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)



# 三、文件目录

## 1. 文件控制快---PCB

> 用来存储文件的相关信息

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200522135535103.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

## 2. 文件目录结构

### 单级目录

> 就是只有一层目录

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200523125322687.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

### 两级目录

>多了一层用户目录

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200523125523952.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

### 多级目录结构

> 可以直接理解成现代的目录结构（树形结构）
>
> 考虑I/O操作，会有相对路径的操作

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200523130042443.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

### 无环图目录结构

> 多个用户节点指向同一个文件，以实现文件共享

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200523130734762.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

## 3. 索引节点

> 也是一种类似分页的思路，为了减轻I/O的负担，查找的是简略版信息

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200523131601605.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

# 四、 文件的物理结构

> - 连续分配
> - 链接分配
> - 索引分配

## 1. 文件块

> 和内存类似，会分块来进行I/O

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200523180224299.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

## 2. 连续分配

> 就是连续的分配一定的物理块，类似数组
>
> 优点：可以快速直接访问
>
> 缺点：不方便扩展，会产生大量的外部碎片

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200523181027428.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

## 3. 链接分配

> 类似链表

- 隐式链接（隐式是相对显示而言的

  FCB会记录相应的起始地址和长度

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200526122521818.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

- 显示链接

  把物理块之间的关系记录在另一个文件中FAT

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200526123107715.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

## 4. 索引分配

> 为每一个文件分配了一个索引表，使之可以直接访问；不同于链式是一整个磁盘分配一张FAT表

**数据太大，装不下所有的映射，需要提出改进**

![在这里插入图片描述](https://img-blog.csdnimg.cn/2020052621523779.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

### 链式方案

> 在索引表的最后一个地方，指向下一个索引表；
>
> 缺点：依旧低效

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200526215650573.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

### 多层索引

> 类似于多级页表，建立多级索引表
>
> 缺点：小文件的还是需要占用过多的空间，并且需要多次I/O，速度较慢

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200526220247377.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

### 混合索引

> 很牛的思路：一小部分直接地址，一小部分一级索引，然后一部分二级索引，一部分三级……
>
> 很综合的考虑了问题的情况

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200526221016186.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

## 5. 物理结构的总结

![在这里插入图片描述](https://img-blog.csdnimg.cn/2020052622231856.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)



# 五、文件管理磁盘

## 1. 空闲表法

> 记录空闲块号和空闲的块的数量

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527093815258.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**回收**

1. 前后都没有空闲区/前后都相邻
2. 前面有空闲区/后面有空闲区



## 2. 空闲链表法

> 用链表的形式记录下一个空闲的磁块，分两个种类

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527094753210.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**空闲盘块链**

> 就是链表模式

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527095006531.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**空闲盘块区**

> 连续的空闲当做一个区

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527095454861.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

## 3. 位示法

> 类似二维数组？

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527101205324.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

## 4. 成组链接法

> **链式的缺点：**链表可能太长，不适合大文件
>
> **改进：**增加一个顶级的目录----**超级块**

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527101656406.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**运行逻辑**

> 不同点：每一块头位置都会记录下一组空闲盘的块数

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527102209635.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

- 分配

  检查空间，分配，修改空间块数量；（可能需要修改超级块的信息）

- 回收

  超级块未满：回收，修改空间块数量

  超级块已满：回收，自己成为超级块，指向上一个超级块（类似于链表的头插法）

# 六、文件的基本操作

## 1. 创建文件

> 找空间，创建目录项

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527105909485.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

## 2. 删除文件

> 回收磁盘，删除目录项

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527110143365.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

## 3. 打开文件

> 找到文件，检查是否有权限，讲目录项复制到内存中
>
> 在内存中生成一个**打开文件表**，用来记录目录项

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527111254846.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

- 会有一个文件计数器，记录使用该文件的数量，以应对关闭，删除的操作对其他文件的影响

## 4. 关闭文件

> 回收内存资源，删除打开文件表项

![在这里插入图片描述](https://img-blog.csdnimg.cn/2020052711193590.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

## 5. 读文件

> 在读文件前实际上已经执行了打开文件这个操作，读文件时，是在内存的**打开文件表**中查找文件目录项

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527112223684.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

## 6. 写文件

> 同样也是在**打开文件表**中查找；写完会写回内存

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527112538798.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

# 七、 文件共享

> 硬链接和软链接
>
> 主要就是是有自己的路径还是别人的路径

**硬链接**

> 有自己的目录

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527114037150.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**软链接**

> 快捷方式

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527114710627.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

# 八、文件保护

> 比较简单明了

**1. 口令保护**

> 加一个验证码的东西，危险

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527163541414.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**2. 加密保护**

> 需要解密操作，文件本身的数据是打乱的

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527173742520.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**3. 访问控制**

> 添加权限功能来进行控制
>
> 可以进行分组管理，分组中，单独拒绝大于组的权限

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527174427303.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

# 九、文件系统层次结构

> 总结概括的一章

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527181133755.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

# 磁盘

# 一、 磁盘的结构

> 基本都是一些简单的概念

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527182515944.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

- 磁盘：一片圆片
- 磁道：圆片上的一圈
- 扇区：一个扇形面

**1. 读写数据**

> 利用磁头进行读取（移动）

![在这里插入图片描述](https://img-blog.csdnimg.cn/2020052718281993.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**2. 盘面、柱面**

> 盘面：一个个盘
>
> 柱面：一个个磁道纵向看形成的柱面

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527183213448.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**3. 分类**

> 磁头是否可以移动；磁片是否可以更换

![在这里插入图片描述](https://img-blog.csdnimg.cn/202005271833589.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527183434406.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

# 二、 磁盘调度算法

## 1. 一次磁盘读写消耗的时间

> 由于磁头本身就在磁盘上，所以距离磁头最远的扇区也就1/2的距离

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527185033126.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**子节的传输时间**

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527185119780.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

## 2. 先来先服务（FCFS）

> 优点：队列会保证不会饿死
>
> 缺点：性能一般，应对复杂情况性能更差

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527192035648.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

## 3. 最短寻找时间优先算法（SSTS）

> 优点：性能较好，优先处理
>
> 缺点：可能会饥饿

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527192305288.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

## 4. 扫描算法（scan）==电梯

> 类似电梯算法：只往一个方向移动，到头才回头
>
> 优点：性能好，平均时间也短
>
> 缺点：
>
> 1.  可以提前改变位置;
>
> 			2.  处理并不平均

 ![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527193037761.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

## 5. Look算法

> 会一边看是否可以直接回头，解决scan第一个问题
>
> 优点：平均时间缩小

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527193300867.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

## 6. 循环扫描算法（C-scan）

> 循环的意思是**循环队列**，即到头后就从头开始
>
> 优点：响应平均
>
> 缺点：平均时间更长

![在这里插入图片描述](https://img-blog.csdnimg.cn/2020052719355596.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

## 7. C-Look算法

> 循环算法是从头开始，这里变成从头一个响应开始

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527193744152.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

# 三、减少磁盘延迟的方法

> 由局部性原理：连续存储区域被读取的概率更大，因此考虑减少连续读取的时间；又由于磁头读入需要I/O，所以会有延迟，所以连续读取的存储在物理上不连续才可以连续读取。
>
> 同理：
>
> 下面的一个磁盘由于上面的磁头正在读取，所以下面的名称最好也和上面的错位开，使得读取操作可以连续

**交替编号**

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527200437737.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**错位命名**

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527202753151.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

# 四、磁盘管理

> 了解了解，简单的介绍

**1. 磁盘初始化**

> 分扇区，柱面， 逻辑化

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527214937558.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**2. 引导块**

> 引导开机的启动程序，放在ROM中，只有很小的一部分

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527215508634.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**坏块管理**

> FAT表表明，磁盘控制器维护一个坏块链表，保留备用扇区来进行坏块替换策略

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200527220014555.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)