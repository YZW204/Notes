## 一、Linux分区

> 分区是用来组成整个文件系统的一部分

- 硬盘

  - IDE和SCSI两种

  - 硬盘的驱动标识符“IDE：hdx~、SCSI：sdx ~”

    > x是盘号（a为基本盘，b为基本从属盘，c为辅助主盘，d为辅助从属盘）
    >
    > ~代表分区，1-4表示主分区和扩展分区；5开始就是逻辑分区

  - 查看设备挂载情况

    > lsblk 和lsblk -f

- 磁盘情况查询

  > df -h

  查询指定目录的情况

  > du 选项 /目录
  >
  > -s		指定目录占用大小汇总
  >
  >  -h		带计量单位 
  >
  > -a		含文件
  >
  > --max-depth=1 子目录深度 
  >
  > -c 		列出明细的同时，增加汇总值

## 二 、网络配置

> 可以配置一个指定的IP地址，配置后重启网络服务或者重启主机

- ping指令

  > ping ip 测试连通性

#### 1、设置主机名和host

设置host：在指定的文件中修改即可

主机名解析：

host文件：记录IP和主机名的映射关系

DNS：域名解析系统

- 解析主机域名过程：
  1. 检查**本地**浏览器缓存的IP和DNS解析器
  2. 检查**本地**host文件中是否有IP配对的域名IP映射，host文件
  3. 到域名DNS解析（网络上

## 三、进程

> 每一个正在执行的程序都被称为一个进程，每一个进程都分配一个PID

#### 显示系统进程

ps命令用来查看目前系统正在执行的进程，以及执行的情况

ps显示的信息选项

| 字段 | 说明                   |
| ---- | ---------------------- |
| PID  | 进程识别号             |
| TTY  | 终端机号               |
| TIME | 此进程所消耗CPU时间    |
| CMD  | 正在执行的命令或进程名 |

选项

```shell
ps -a :显示所有进程
ps -u：以用户的格式显示信息
ps -x：显示后台运行的参数
组合使用 ps -aux
```

- 参数解释

USER：进程执行用户
PID：进程号
%CPU：当前进程占用cpu的百分比
%MEM：占用物理内存的百分比
VSZ：进程占用虚拟内存大小（KB）
RSS：进程占用的物理内存的大小（KB）
TTY：终端名称
STAT：运行状态，S-表示sleep休眠、s-表示该进程是会话的先导进程，N-表示进程拥有比普通优先级更低的优先级，R-表示正在运行，D-短期等待，z-僵尸进程，T-被跟踪或者被停止等等
STARTED：执行的开始时间
TIME：占用CPU时间
COMMAND：启动进程所用的命令和参数，如果过长会被截断显示



- 查看服进程

```shell
ps -ef 以全格式显示所有的进程
-e 显示所有的进程
-f 全格式
```

#### 终止进程

> kill [选项]  进程号	杀死单一的进程
>
> killall 进程名称	杀死该进程下的所有进程

- 选项 -9 表示强迫进程立即停止

- 踢掉某个用户

  > ps -ef |grep sshd  --->用来获取将要被踢的用户的PID进程号
  >
  > kill 进程号

- 重启sshd服务

  > /bin/systemctl start sshd.service

#### 查看进程树pstree

> pstree [选项]
>
> -p 显示pid
>
> -u 显示进程的所属用户

## 四、服务

> 服务本身就是进程，通常会用来监听某个端口

使用

```shell
service 服务名 [start|restart|reload|status]

CentOS 7.0之后使用 systemctl
```

- 查看系统服务

  ```shell
  setup
  可以看到全部的系统服务
  ```

#### chkconfig指令

> 设置服务在各个运行级别设置自启动/关闭

```shell
chkconfig --list [|grep xxx]	查看某个服务
chkconfig --level 5 服务 on/off 	在某个等级下状态的控制
```

#### systemctl

```shell
systemctl [start|stop|restart|status] 服务名
```

- 命令

```shell
systemctl list-unit-files[|grep 服务名]	查看服务开机启动状态
systemctl enabled/disable 服务名	设置和关闭服务启动
systemctl is-enabled  服务名		查看是否自启动
```

#### 打开指定的端口

> 在防火墙打开的时候，外部请求数据包不能给服务器监听端口通讯，需要打开指定端口

- 打开

```shell
firewall-cmd --permanent --add-port=端口号/协议
```

- 关闭

```shell
firewall-cmd --permanent --add-port=端口号/协议
```

- 关闭和开启都需要重新载入防火墙才能生效

```shell
firewall-cmd --reload
查询是否开放
firewall-cmd --query-port=端口号/协议
```

## 五、 动态监控

> top指令和ps 指令很像。都是用来显示执行的进程。top和ps最大的不同在于top执行一段时间后可以更新正在运行的进程

```shell
top [选项]
```

- 选项说明

| 选项    | 功能                                       | 实例     |
| ------- | ------------------------------------------ | -------- |
| -d 秒数 | 指定top命令每隔几秒更新。默认是3秒         | top -d 5 |
| -i      | 是top不显示任何闲置或者僵死进程            |          |
| -p      | 通过指定监控进程ID来仅仅监控某个进程的状态 |          |

- 交互操作说明

> 在显示页面可以使用这些操作进行排序

| 操作 | 功能                            |
| ---- | ------------------------------- |
| P    | 以CPU施一公率排序，默认就是此项 |
| M    | 以内存使用率排序                |
| N    | 以PID排序                       |
| q    | 退出top                         |

#### 监控网络状态

> netstat [选项]
>
> -an 按一定的顺序输出
>
> -p	显示正在使用的进程

ping命令可以检测两个主机是否链接正常

## 六、 RPM与YUM

> rpm是用于互联网包的下载和安装中的

- 查询已经安装的rpm列表

  ```shell
  rpm -qa |grep xxx
  q:query 查询
  a:all	所有
  ```

- 查询所属关系

  ```shell
  rpm -ql 包名 	查询包所在的路径
  rpm -qf 路劲	查询路劲所属的包
  ```

- 安装和卸载rpm的包

  ```shell
  安装：
  rpm -ivh 包所在的路径
  参数
  i：install 安装
  v：verbose 提示
  h=hash     进度条	
  
  卸载：
  rpm -e 包名
  强制：rpm -e 包名 --nodeps 包名
  ```

**YUM**

> Yum是一个Shell前端软件包管理器。基于RPM包管理，能够从指定的服务器自动下载RPM包并安装，可以自动处理依赖关系，并且一次安装所有依赖的软件包

- 检查服务器是否有需要安装的软件

  > yum list |grep xx

- 安装

  > yum install xxx
