# 物理层

## 1. ★物理层协议主要任务

+ ==**机械特性**==：指明接口所用接线器的**形状**和**尺寸**、**引脚数目**和**排列**、**固定**和**锁定**装置
+ ==**电气特性**==：指明在接口电缆的各条线上出现的**电压范围**
+ ==**功能特性**==：指明某条线上出现的某一电平的**电压表示何种意义**
+ ==**过程特性**==：指明对于不同功能的各种可能**事件的出现顺序** 

#### 1.1 补充：数据通信的基础知识

> 一个数据通信系统划分为**三大**部分**源系统** （发送端）、**传输系统**和**目的系统**

##### 1. 源系统：

- **源点**：源点设备产生的传输数据。如把计算机输入的汉字转化成数字比特流
- **发送器**：由源点产生的数字比特流通过发送器编码后（形成模拟信号），才能在传输系统中传输。典型的有**调制器**
- **接收器**：接收传输系统传送来的信号，并把它转换为能够被目的设备处理的信息。典型的有**解调器**
- **终点**：从接收器获取数字比特流，然后把信息输出

##### 2. 信号

> 根据信号中代表消息的参数的取值不同，信号可以分为两类，**模拟信号和数字信号**

1. **模拟信号**：消息的参数的值是连续的，电话中的信号就是模拟信号
2. **数字信号**：消息的参数的值是离散的。

## 2. 传输媒体

### 导引型传输媒体 ###

> 有摸得到的实物进行传导信号的方式

#### ①同轴电缆 ####

> 电缆各层都是同轴心的，因此称同轴电缆

<img src="https://s2.loli.net/2022/03/29/mMQScoy1V4vj75R.png" alt="image-20210126184247727" style="zoom:50%;" />

**基带同轴电缆(50$\Omega$)**：数字传输，过去用于局域网<br>**宽带同轴电缆(75$\Omega$)**：模拟传输，目前主要用于有线电视

同轴电缆**价格较贵且布线不够灵活和方便**，随着集线器的出现，在局域网领域基本上都是采用双绞线作为传输媒体

#### ②★双绞线 ####

> 把两根互相绝缘的铜导线并排放在一起，然后按照一定规则绞合起来就构成了双绞线，这是一种古老且常用的传输媒体

**常用绞合线类别、带宽和典型应用**

<img src="https://s2.loli.net/2022/03/29/KuZjRHWXC7PDMq5.png" alt="image-20210126194014016" style="zoom:50%;" />

##### UTP #####

> **无屏蔽**双绞线`UTP`电缆

+ 蓝线和蓝白线绞合
+ 橙线和橙白线绞合
+ 绿线和绿白线绞合
+ 棕线和棕白线绞合

**作用**：①抵御部分来自外界的电磁波干扰   ②减少相邻导线的电磁干扰

##### STP #####

> **屏蔽**双绞线`STP`电缆，其与`UTP`相比增加了金属丝编织的屏蔽层，提高了抗电磁干扰能力

#### ③★光纤 ####

> 光纤很细，因此必须将其做成结实的光缆。一根光缆少则一根光纤，多则可包括数百根

<img src="https://s2.loli.net/2022/03/29/9OGYnzCNe2T4ykH.png" alt="image-20210126194452262" style="zoom: 67%;" />

##### 原理 #####

<img src="https://s2.loli.net/2022/03/29/k7hcjmXlfpzDW3n.png" alt="image-20210126195712317" style="zoom:50%;" />

如果全反射一直进行，则光就会沿着光纤一直传输下去。

实际上只要入射角大于某个临界角度就可以发生全反射，因此多条不同角度的光可以在光线里一起传输，这种光纤称作**多模光纤**

![image-20210126201453955](https://s2.loli.net/2022/03/29/E2oiLS9O3Wu8mrx.png)

- **由于色散**(模式、材料、波导色散)，光在多模光纤中传输一定距离后必然产生**失真(脉冲展宽)**
- 因此**多模光纤只适合近距离传输**(建筑物内，办公室之间)
- 发送光源可使用**发光二极管(便宜)**；接收检测可用光电二极管

若光纤直径减小到只有一个光的波长，则光纤就像一根波导一样，可使光线一直向前传播，而不会产生多次反射，这样的光纤称作**单模光纤**

<img src="https://s2.loli.net/2022/03/29/npm65EGOLWMHzbx.png" alt="image-20210126201737274" style="zoom:50%;" />

+ 没有模式色散，在`1.31`微米波长附近，材料色散和波导色散大小相等符号相反，两者正好抵消
+ 单模光纤适合长距离传输且衰减小，但其制造成本高，对光源要求高
+ 发送光源需要使用**激光发生器(贵)**；接收检测用激光检波器

##### 纤芯直径 #####

+ **多模光纤：**`50`微米，`62.5`微米
+ **单模光纤：**`9`微米
+ **纤芯外包层**：`125`微米

##### 工作波长 #####

+ **0.85微米(衰减较大)**
+ **1.30微米(衰减较小)**
+ **1.55微米(衰减较小)**

##### 优点 #####

+ **通信容量大**(`25000~30000GHz`的带宽)
+ **传输损耗小**，远距离传输时更加经济
+ **抗雷电和抗电磁干扰性能好**。这在大电流脉冲干扰环境下尤为重要
+ **无串音干扰**，保密性好，不易被窃听
+ **体积小，重量轻**

##### 缺点 #####

+ 割接**需要专用设备**
+ 光电接口**价格较贵**

### 非导引型传输媒体 ###

> 传导信号的东西摸不到

<img src="https://s2.loli.net/2022/03/29/LfUIT7PcW8VXAM5.png" alt="image-20210126203428750" style="zoom:67%;" />

<img src="https://s2.loli.net/2022/03/29/jyvUQGSTH4mZ2LB.png" alt="image-20210126204220667" style="zoom:67%;" />

#### ①无线电波 ####

> 低频和中频频段用地面波传播；高频和甚高频靠电离层(地球上方`100~500`千米高空的带电离子层)反射

#### ②★微波 ####

> 微波会穿透电离层进入宇宙，因此其不能通过电离层反射到很远的地方

##### 地面微波接力通信 #####

> 微波是**直线传播**的，而地球表面是个曲面，因此传播距离受到限制，一般只有`50KM`左右；如果采用`100`米高的天线塔，则传播距离可增大到`100`公里。<br>为实现远距离通信，必须在一个微波通信信道的两个终端之间建立若干个中继站，**中继站把前一阵送来的信号经过放大后再发送到下一站**8

##### 卫星通信 #####

> 在地球站之间，利用位于约`36000KM`高空的人造同步地球卫星作为中继器的一种微波接力，其最大特点是通信距离远，传播时延大(约`250~300ms`)。低轨道卫星通信系统也已经正在部署

#### ③红外线 ####

+ 点对点无线传输
+ 直线传播，**中间不能有障碍物**，传输距离短
+ 传输速率低(`4Mb/s~16Mb/s`)

#### ④可见光 ####

> 即光源作为信号源，前景好，暂时未被大范围应用

## 3. 传输方式 ##

### ★串行/并行传输 ###

> **串行传输**是指数据是`1`个比特`1`个比特依次发送的，发送端与接收端之间只用`1`条数据传输线即可<br>**并行传输**是指一次发送`n`个比特而不是一个比特，在发送端和接收端之间要有`n`条传输线路

### ★同步传输 ###

> 数据块以稳定的**比特流形式传输**，字节之间没有间隔。接收端在每个比特信号的中间时刻(有区分`0,1`的标志)进行检测，以判别接收到的是比特`0`还是`1`。<br>由于不同设备的时钟频率存在一定差异，不可能完全相同，在传输大量数据的过程中，所产生的判别时刻的累计误差会导致接收端对比特信号的判别错位。因此**需要采取方法使双方的时钟保持同步**

##### 收发双方时钟同步方法 #####

+ **外同步：**在收发双方之间加一条单独的时钟信号线
+ **内同步：**发送端将时钟同步信号编码到发送数据中一起传输(如曼彻斯特编码)

### ★异步传输 ###

> 以字节为独立的传输单位，字节间的时间间隔不是固定的，接收端仅在每个字节的起始处对字节内的比特实现同步，为此通常传送前要在每个字节前后加上起始位和结束位。

+ 异步是指**字节之间异步**(字节之间的时间间隔不固定)
+ 字节中的每个比特仍然要同步(各比特的持续时间是相同的)

### 单工/半双工/全双工 ###

+ **单工通信**：通信双方只有一个数据传输方向(无线电广播)
+ **半双工通信**：通信双方可以相互传输数据，但不能同时进行(对讲机)，也叫双向交替通信
+ **全双工通信**：通信双方可以同时发送和接收消息(电话)，也叫双向同时通信

**单工需要一条信道；其他的需要两条(一个方向一条)**

## 4. 编码与调制 ##

+ 消息(`message`)包括文字、图片、音频和视频
+ **数据是运送消息的实体**；计算机中的网卡将比特`1`和`0`变换成相应电信号发送到网线，即信号。
+ **信号是数据的电磁表现**，由信源(网卡)发出的原始电信号称为基带信号
+ **基带信号又分为数字基带信号(CPU和内存传输的信号)和模拟基带信号(麦克风收到声音后转变的电信号)**

> 信号需要在信道中进行传输，信道可分为数字信道和模拟信道
>
> <img src="https://s2.loli.net/2022/03/29/8KtWGjfcOe4syAJ.png" alt="image-20210127145727103" style="zoom:33%;" />
>
> 如果使用信道复用技术，传输媒体里可以有多个信道
>
> 在不改变信号性质的前提下，仅对基带信号的波形进行变换，称为**==编码==**。编码后产生的信号还是数字信号，可以在数字信道中传输
>
> 把基带信号的频率范围搬移到较高的频段，并转换为模拟信号，称为**==调制==**。调制后产生的信号还是模拟信号，可以在模拟信道中传输

![image-20210127144813254](https://s2.loli.net/2022/03/29/rgv9j3dSl5min6G.png)

#### 常用编码 ####

<img src="https://s2.loli.net/2022/03/29/Bw6qFEoJyTknuK3.png" alt="image-20210128163257305" style="zoom:50%;" />

##### ①不归零编码 #####

> 正电平代表比特`1`，负电平代表比特`0`。在整个码元时间内，电平不会出现零电平

**这种编码方式如何区分连续几个相同电平呢？**

> 这要求发送方发送和接收方接收严格同步，这就需要额外一根传输线来传输时钟信号。接收方按照时钟节拍逐个接收码元。但是对于计算机网络，多的线不如拿来传输数据，因此由于存在同步问题，**计算机中的数据传输不使用不归零编码**

##### ②归零编码 #####

> **每个码元传输结束后信号都要"归零"**，所以接收方只要在信号归零后进行采样即可，不需要单独的时钟信号。
>
> 实际上，归零编码相当于把时钟信号用"归零"方式编码在了数据之内，这称为"**自同步**"信号
>
> 归零编码中的大部分**数据带宽**都用来传输"归零"而**浪费**掉了(编码效率低)

##### ③曼彻斯特编码 #####

> 码元的中间时刻既表示时钟，又表示数据。根据**正负跳变来区分比特**

***具体如何根据跳变实现同步？***

> 第一次数据跳变的时间记录下来【即半个码元的时间】，此后每过一个码元的时间就进行检测，根据跳变方向决定数据为`0`还是`1`。

##### ④差分曼彻斯特编码 #####

> ①跳变仅表示时钟	②码元开始处电平是否发生变化表示数据。<br>**比曼彻斯特变化少，更适合较高的传输速率**

#### 基本调制方法 ####

<img src="https://s2.loli.net/2022/03/29/rtDKg9odHX6lYTO.png" alt="image-20210127154831820" style="zoom:50%;" />

**如上一个码元对应一个比特，如何能让1个码元包含多个比特呢？**

> 可以使用混合调制。正弦信号$A\sin \omega(x+\dfrac{\varphi}{\omega})$，相位和频率是相关的，因此二者不可同时做修改<br>通常情况下，相位和振幅可以结合起来其一调制，称为**正交振幅调制QAM**