##  内存

## 一、 内存管理

### 1. 引入

**1. 进程运行的基本原理**

代码---> 编译--->指令放入内存----> 交给CPU运行

![](https://img-blog.csdnimg.cn/20200421180308143.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**2. 装入内存的三种方式**

- **绝对装入**

  > 编译时就把程序放在相应的位置

  ![](https://img-blog.csdnimg.cn/20200421202025892.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

- **静态重定位**

  > 进程执行时才会进行装入

  ![](https://img-blog.csdnimg.cn/20200421202117615.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

- 动态重定位

  > 只有在需要运行时才会装入内存

  ![](https://img-blog.csdnimg.cn/20200421202516120.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**3. 三种链接方式**

**1. 静态链接**

![](https://img-blog.csdnimg.cn/20200421203135471.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**2. 装入时动态链接**

![](https://img-blog.csdnimg.cn/20200421203248608.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**3. 运行时动态链接**

![](https://img-blog.csdnimg.cn/20200421203435485.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

### 2. 内存管理什么

> 内存的分配与回收

![](https://img-blog.csdnimg.cn/20200421204131495.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**1. 内存空间的扩展（虚拟性）**

![](https://img-blog.csdnimg.cn/20200421204522537.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**2. 地址转换**

![](https://img-blog.csdnimg.cn/20200421204834534.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**三种方式**

![](https://img-blog.csdnimg.cn/20200421204937503.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**4. 内存保护**

![](https://img-blog.csdnimg.cn/20200421205035855.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**两种方式**

![](https://img-blog.csdnimg.cn/20200421205354626.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

![](https://img-blog.csdnimg.cn/20200421205641907.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

###  3. 覆盖技术与交换技术

![](https://img-blog.csdnimg.cn/20200423175639916.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

![](https://img-blog.csdnimg.cn/20200423175532452.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**1. 覆盖技术**

> 一些区域是允许在需要时覆盖，不需要时就调出的

![](https://img-blog.csdnimg.cn/2020042318025985.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

![](https://img-blog.csdnimg.cn/20200423180820382.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**2. 交换技术**

> 把一些状态转换成挂起状态，空出内存

![](https://img-blog.csdnimg.cn/20200423182501764.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

### 4. 分配与回收

![](https://img-blog.csdnimg.cn/20200423183108555.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**1. 单一连续分配**

![](https://img-blog.csdnimg.cn/20200423183833877.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**2. 固定分区分配**

![](https://img-blog.csdnimg.cn/20200423184230246.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**分区表**

![](https://img-blog.csdnimg.cn/20200423184627961.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**3. 动态分区分配（可变分区分配）**

![](https://img-blog.csdnimg.cn/2020042318520337.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

内存分配有四种算法

**4. 内部碎片与外部碎片**

> 内部：有些区域用不上
>
> 外部：内存有剩余的，但是用不上

![](https://img-blog.csdnimg.cn/20200423212650781.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

### 5. 动态分配的四种算法
**1.首次适应算法**

![在这里插入图片描述](https://img-blog.csdnimg.cn/2020042321452336.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**2.最佳适应算法**

![在这里插入图片描述](https://img-blog.csdnimg.cn/2020042321590110.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**3.最坏（大）适应算法**

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200423220633433.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**4.临近适应算法**

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200423220900503.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200423221603115.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**5.四种算法归纳比较**

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200423221937764.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

### 6. 分页存储

> 和计组的一个知识点比较像，都是分块，还有块内便宜量

![](https://img-blog.csdnimg.cn/20200503190414618.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**1. 分页存储的思想**

> 把一个分区变得小，小得恰恰好，太小的话没有什么意义，在分解的时候消耗更多

![，先确定顺序，避免后面顺序的占用了资源](https://img-blog.csdnimg.cn/20200503191933864.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**2. 分页管理的概念**

系统的内存：

- **页框：**内存平均分配的空间
- **页框号：**就是从零开始的编号

用户的进程：

- **页面：**与内存相同大小的区域
- **页号：**也是从零开始的编号

操作系统以**页框为单位**，为每个进程分配内存空间，每个页框中放入一个页面（进程）



**3. 实现地址的转换**

>  采用组成原理的内存的知识，即分页技术

![](https://img-blog.csdnimg.cn/20200503194743868.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)



![](https://img-blog.csdnimg.cn/20200503215055931.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**3. 计算页号和偏移量**

![](https://img-blog.csdnimg.cn/20200503215344637.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

> 即通过逻辑地址计算出对应的页号，然后页号直接对应了物理地址，再加上偏移量就是准确的地址了

**4. 分页存储的逻辑结构**

![](https://img-blog.csdnimg.cn/20200503220607170.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**5. 页面在内存中的地址**

>  引入一个页表，用来映射页号和实际的物理地址的关系

![](https://img-blog.csdnimg.cn/20200503220952295.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

![](https://img-blog.csdnimg.cn/20200503221250554.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

==总结三个步骤：==

1. 计算页号，偏移量
2. 判断页号是否出界
3. 根据页号对应的物理地址计算实际物理地址，X+3*M

**注意：**

页面大小和内存（物理、页框）大小是一致的

### 7. 快表机制

> 一种通过概率学的方式改进的思路，即 cache

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200505112605873.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70))

![在这里插入图片描述](https://img-blog.csdnimg.cn/2020050511441885.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

### 8.两级页表

> 页面比较小，因此会出现巨量的页表，这时候页表太大。所以可以套娃设计二级页表
>
> 同时一般也不会同时访问所有页表的内容

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200505125243303.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

- 二级页表的结构

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200505131519939.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

- 实现

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200505133306791.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

- 注意事项：

> 页表大小==不超过==页面的大小

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200505144046207.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

### 9.分段管理

> 以逻辑结构来进行分段，相当于与程序员的函数

**1. 结构**

> 总体上和分页式差别不大

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200507143112191.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**2. 段表**

> 和分页式一样也有段表，区别在与分页式的页面大小一致，但是分段式的段长可能不一样

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200507143835462.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**3. 地址变换**

> 多了一个判断段长是否过大的过程

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200507144834316.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**4. 和分页的对比**

> 区别比较明显

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200507145814456.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**相比之下的优点**

> 信息的共享

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200507150216415.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

### 10. 段页式管理

> 两个有好有坏，就都运用上

**对比优缺点：**

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200507153829103.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**1. 分段+分页=段页式管理**

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200507154133960.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**2. 逻辑结构**

> 就是相当于二级分页，顶级的是段号，二级的是页号

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200507154755703.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**3. 找段表，页表过程**

> 先找段表，段表就会告诉你页表，页表最后找到物理地址

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200507160703773.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**4. 地址转换过程**

> 也基本一致，多了检查段长度这些步骤

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200507161208162.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)



## 二、 虚拟内存

### 1. 基本概念

**1. 传统存储的缺点**

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200507175726392.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

> 由**时间和空间局部性原理**，提出了虚拟内存的技术

**2. 虚拟内存的特征**

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200507180934242.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**三个特征**

- 多次性：允许多次装入
- 对换性：允许在作业工作中，讲作业换入换出
- 虚拟性：逻辑上扩充内存

### 2. 请求分页管理

> 没有页面就请求页面

**1. 与基本分页的区别**

> 需要多记录4个状态

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200507183231700.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**2. 缺页中断机构**

> 属于内中断的故障，是主要的不同之处

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200507185905607.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**3. 地址变换机构**

> 多了需要中断，以及与外存的置换，对快表的修改或者覆盖

![在这里插入图片描述](https://img-blog.csdnimg.cn/2020050722145316.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

### 3. 置换算法

**1. 最佳置换算法**OPT

> OPT--optimal，理想算法
>
> 缺点：需要预判未来，不能实现

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200508155059159.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**2. 先进先出置换算法--FIFO**

> 用队列的方式，每次都淘汰掉队头
>
> 缺点：每次都要淘汰队头，队头可能会再次使用

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200508155751826.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**3. 最近最久未使用置换算法--LRU**

> least recently used，淘汰最近没有使用过的那个页面
>
> 缺点：但是每次都要往回遍历一遍，太久了

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200508160702605.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**4. 时间置换算法--COLCK**

> NRU-- Not Recently Used
>
> 最近未用的更加准确的表示方式，即增加一个变量访问位，来表示最近一轮中是否被使用过
>
> 并且每一轮都会把每一个数标识为这一轮没有使用，直到找到一个上一轮为使用的数
>
> 缺点：有些不需要写入外存的替换优先级更高，可以优化速度

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200508162122576.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**5. 改造型的时钟置换算法**

> 增加一个修改位，来判断是否需要写入外存进行额外的I/O操作，可以只在增加循环的前提下，减少外存的次数

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200508164118342.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**实际上每一轮都有他的任务，主要是未访问>未被修改，所以未访问两次，未修改两次**

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200508164453588.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

### 4. 页面分配策略

**1. 驻留集**

> 给进程分配的物理块的大小

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200508171207873.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**2. 页面分配、置换策略**

> 固定、可变；全局和局部

![  ](https://img-blog.csdnimg.cn/20200508171838609.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

形成三个分配：

- 固定分配局部置换

  > 固定分配了数量，缺页只能自己置换

- 可变分配全部置换

  > 发生缺页的时候就会增加物理块；物理块满了就选择没有被锁定的换

- 可变分配局部置换

  > 频繁缺页，就多发点物理块；基本不缺页，就回收物理块

**3. 调入时间**

> 提前调入的策略，还有就是缺页的时候再调入

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200508173243782.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)

**4. 从哪里调入**

> 从对换区中进行，对换区的速度较快
>
> 

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200508173942434.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzkxNDYwNA==,size_16,color_FFFFFF,t_70)
