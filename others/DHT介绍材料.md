## 分布哈希表DHT的特点：

- 数据(key)由大量分布自组织的结点来协作存储，两个基本操作： Insert(key, value)，Lookup (key)，功能上非常像一个hash表：Hash（key）－>node。引入哈希函数以将要搜索的对象映射到唯一标识符：例如，hash（“Hey Jude”）→8045

- 在网络中的所有节点之间分配散列函数的范围，每个节点都包含标识符空间的一部分，每个节点必须“了解”每个对象的至少一个副本，该对象在其范围内（当存在时）。

 

##  分布哈希表(DHT)方法：
1. 以分布式存储为背景解释DHT方法：海量数据文件由大量peer结点来协作存储，peer结点通过DHT方法来组织。

2. 每个Peer都有唯一逻辑地址PeerID：结点间根据PeerID，按照DHT拓扑构造算法形成P2P网络拓扑；每个结点上都有一个“路由表”，保存了一些邻居结点的信息。

3. 每个Peer负责存储一部分文件：各数据文件（根据其关键字key）有唯一的逻辑地址GUID；根据资源属性值ID，按照一定的映射关系将其放置到特定的结点上；Peer加入或退出时，相关Peer重新划分所负责的文件

4. 文件的发布与定位：文件发布和查找过程都类似于IP路由过程；根据peer结点的“路由表”转发数据的定位消息。

   ---

   ## DHT 数据查询/路由：

   

   1. 对于每个对象，其范围覆盖该对象的节点必须通过“短”路径到达。可以通过查询器节点（假设可以任意选择）。可以通过由具有对象副本的节点（当使用基于指针的方法时）。

   2. 不同的方法（CAN，Chord，Pastry，Tapestry）仅在路由方法上有根本的不同：任何“好”的随机散列函数就足够了。

   ​      

   - DHT overlay的基本功能：构建拓扑、拓扑维护：节点动态加入退出、资源查询：分布式查询

   - DHT overlay的评价指标：节点度数，路由路径/网络直径，负载均衡，稳定性….
     

## P2P技术的特点体现在以下几个方面。

- **非中心化**（Decentralization）：网络中的资源和服务分散在所有结点上，信息的传输和服务的实现都直接在结点之间进行，可以无需中间环节和服务器的介入，避免了可能的瓶颈。P2P的非中心化基本特点，带来了其在可扩展性、健壮性等方面的优势**。**

- **可扩展性**：在P2P网络中，随着用户的加入，不仅服务的需求增加了，系统整体的资源和服务能力也在同步地扩充，始终能较容易地满足用户的需要。整个体系是全分布的，不存在瓶颈。理论上其可扩展性几乎可以认为是无限的。



- **健壮性**：P2P架构天生具有耐攻击、高容错的优点。由于服务是分散在各个结点之间进行的，部分结点或网络遭到破坏对其它部分的影响很小。P2P网络一般在部分结点失效时能够自动调整整体拓扑，保持其它结点的连通性。P2P网络通常都是以自组织的方式建立起来的，并允许结点自由地加入和离开。P2P网络还能够根据网络带宽、结点数、负载等变化不断地做自适应式的调整。



- **高性能  ** **/价格比 ** ：性能优势是P2P被广泛关注的一个重要原因。随着硬件技术的发展，个人计算机的计算和存储能力以及网络带宽等性能依照摩尔定理高速增长。采用P2P架构可以有效地利用互联网中散布的大量普通结点，将计算任务或存储资料分布到所有结点上。利用其中闲置的计算能力或存储空间，达到高性能计算和海量存储的目的。通过利用网络中的大量空闲资源，可以用更低的成本提供更高的计算和存储能力。

- **隐私保护:** 在P2P网络中，由于信息的传输分散在各节点之间进行而无需经过某个集中环节，用户的隐私信息被窃听和泄漏的可能性大大缩小。此外，目前解决 Internet隐私问题主要采用中继转发的技术方法，从而将通信的参与者隐藏在众多的网络实体之中。在传统的一些匿名通信系统中，实现这一机制依赖于某 些中继服务器节点。而在P2P中，所有参与者都可以提供中继转发的功能，因而大大提高了匿名通讯的灵活性和可靠性，能够为用户提供更好的隐私保护。



- **负载均衡:** P2P 网络环境下由于每个节点既是服务器又是客户机，减少了对传统C/S结构服务器计算能力、存储能力的要求，同时因为资源分布在多个节点，更好的实现了整个网络的负载均衡。



## **分布式哈希表**

- 哈希表把所有的东西都存储在一台机器上，当这台机器坏掉了之后，所存储的东西就全部消失了。[分布式](https://so.csdn.net/so/search?q=分布式&spm=1001.2101.3001.7020)哈希表可以把一整张哈希表分成若干个不同的部分，分别存储在不同的机器上，这样就降低了数据全部被损坏的风险。

- 

- 分布式哈希表通常采用一致性哈希函数来对机器和数据进行统一运算。这里先不用深究一致性哈希究竟是什么，只需要知道它是对机器（通常是其IP地址）和数据（通常是其KEY值）进行统一的运算，把他们全都映射到一个地址空间中

 ##### 分布式散列表本质上强调以下特性




 - **离散性**：构成系统的节点并没有任何中央式的协调机制。
  - **伸缩性**：即使有成千上万个节点，系统仍然应该十分有效率。
  - **容错性**：即使节点不断地加入、离开或是停止工作，系统仍然必须达到一定的可靠度。

## **全分布非结构化**

- 此类网络采用了随机图、泛洪等机制，构建的系统没有固定的结构，故称为非结构化）网络在重叠网络（overlay）采用了随机图，从而能够较快发现目的结点，面对网络的动态变化体现了较好的容错能力，因此具有较好的可用性。同时可以支持复杂查询，如带有规则表达式的多关键词查询，模糊查询等，最典型的案例是Gnutella。

- 在Gnutella分布式对等网络模型N中，每一个联网计算机在功能上都是对等的，既是客户机同时又是服务器，所以被称为对等机（Servent, Server+Client的组合）。

  随着网络节点的不断增多，网络规模不断扩大，通过这种泛洪方式定位对等点的方法将造成网络流量急剧增加，从而导致网络中部分低带宽节点因网络资源过载而失效。所以在初期的Gnutella网络中，存在比较严重的分区、断链现象。也就是说，一个查询访问只能在网络的很小一部分进行，因此网络的可扩展性不好。所以，解决Gnutella网络的可扩展性对该网络的进一步发展至关重要。

  由于没有确定拓扑结构的支持，非结构化网络无法保证资源查找的效率。即使需要查找的目的结点存在查找也有可能失败。由于采用TTL、泛洪、随机漫步或者选择转发算法，因此直径不可控，可扩展性较差。

  > 注，泛洪算法，不要求维护网络的拓扑结构和相关的路由计算，仅要求接收到信息的节点以广播方式转发数据包。例如，源节点希望发送一段数据给目标节点。源节点首先通过网络将数据副本传送给它的每个邻居节点，每个邻居节点再将数据传送给各自的除发送来数据的节点之外的其他节点。如此继续，知道数据传送至目标节点或者数据设定的生存期限（TTL, Time To Live）为0为止。



## **全分布式结构化拓扑网络**。



目前研究的重点放在了如何有效地查找信息上，最新的成果都是基于DHT的分布式查找和路由算法。这些算法都避免了类似Napster的中央服务器，也不像Gnutella那样基于广播进行查找，而是通过分布式散列函数，将输入的关键字惟一映射到某个结点上，然后通过某些路由算法同该结点建立连接。

分布式散列表（DHT）实际上是一个由广域范围大量结点共同维护的巨大散列表。散列表被分割成不连续的块，每个结点被分配给一个属于自己的散列块，并成为这个散列块的管理者。DHT的节点既是动态的，结点数量也是巨大的，因此非中心化和原子自组织成为两个设计的重要目标。通过加密散列函数，一个对象的名字或关键词被映射为128位或160位的散列值。一个采用DHT的系统内所有结点被映射到一个空间L=[0, 1)，如果散列函数映射一个h位的名字到一个散列值H（是什么？），则有![img](https://img-blog.csdn.net/20150521100504145?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvZWNob2FpeWE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center)。

